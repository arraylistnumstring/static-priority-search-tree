# Static Priority Search Tree on GPU

Runs on CUDA 11.6.2

Tested on NYU's Greene HPC

To compile testers, run:

	module load cuda-11.6
	source tester-compiler.sh -rdc=true -std=c++14

For debugging options, use:
- `-DDEBUG` to toggle DEBUG preprocessor flag and corresponding print output to aid with debugging variables that are inaccessible via gdb
- `-G` to get debugging info about device code (turns off all optimisations; is incompatible with and overrides `-lineinfo`)
- `-g` to get debugging info about host code
- `-lineinfo` to get info on which lines are causing errors

Standard is set to C++14 because Thrust has deprecated older versions of C++ and because this allows use of simpler auto return types.


To run these testers individually, please go to `testers/`, choose one of the subfolders, and execute the `*tester.out` files.


To compare constructed trees between different implementation versions, run:

	source constructor-comparator.sh [datatype-flag] [min-val-range] [max-val-range] \
									 [min-num-elems] [max-num-elems] \
									 [min-rand-seed] [max-rand-seed] \
									 [pipe-1] [pipe-2]
									 [constructor-tester-1] [constructor-tester-2] \
									 [optional-output-file]

If output is empty (save for process numbers and process done messages generated for background tests created during testing), trees are identical; if `optional-output-file` is unspecified, results are printed to standard output

`constructor-comparator.sh` compares trees of sizes `min-num-elems` through `max-num-elems`, inclusive, as created by `constructor-tester-1` vs. `constructor-tester-2`. For each tree size, `constructor-comparator.sh` passes numerical values of the type designated by `datatype-flag` (one of `-d` (`double`), `-f` (`float`), `-i` (`int`) or `-l` (`long`)) in the range \[`min-rand-seed`, `max-rand-seed`\] to each `constructor-tester-*` file. As currently designed, each `constructor-tester-*` file uses these values as seeds to the C++ Mersenne Twister 19937 random number generator engine, with which points of random dimension-1 and dimension-2 values are generated and passed to the priority search tree constructor. Values of points generated by `*tester.out` files are restricted to the inclusive range \[`min-val-range`, `max-val-range`\].


Currently, the two-sided search testers are ready for testing with the double data type. The three-sided search function has been implemented but a tester has not been created yet.

Please execute the search testers by following the instructions describing their usage that are generated when run without any arguments.


To check memory safety of GPU code, use:

	compute-sanitizer [options] [executable] [executable-options]
